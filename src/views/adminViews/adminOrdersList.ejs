<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Đặt cơm CG</title>
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
            crossorigin="anonymous"
    />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
<%- include('../header') -%>
<h1 class="admin-header">Admin Dashboard</h1>
<div class="row">
    <div class="col-sm-2 admin-left">
        <a href="/admin/food" class="btn btn-primary btn-admin"
        >Quản lý đồ ăn</a
        >
        <a href="/admin/create" class="btn btn-primary btn-admin"
        >Tạo món ăn mới</a
        >
        <a href="/admin/user/create" class="btn btn-primary btn-admin"
        >Tạo user mới</a
        >
        <a href="/admin/user" class="btn btn-primary btn-admin">Quản lý User</a>
        <a href="/admin/list" class="btn btn-primary btn-admin"
        >Danh sách đồ đặt</a
        >
    </div>
    <div class="col-sm-10 admin-right">
        <% const date = new Date();
           const options = { day: '2-digit', month: '2-digit', year: 'numeric' };
        %>
        <div class="row ">
            <div class="col-4">
                <h2>Danh sách đặt ngày <%= date.toLocaleDateString(undefined, options) %></h2>
            </div>
            <div class="col-md-4 offset-md-4">
                <a href="/admin/export-file" class="btn btn-primary" style="max-width: 200px">import excel</a>
            </div>
        </div>
        <br />
        <table class="table table-striped">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Tên</th>
                <th scope="col">lớp</th>
                <th scope="col">Order</th>
            </tr>
            </thead>
            <tbody>
            <% data.forEach((item, index) => { %>
                <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= item.userID.fullName %> </td>
                    <td><%= item.userID.className %></td>
                    <td>
                        <p>
                        <% item.foods.forEach(food => { %>
                            <% if(food.quantity > 1) { %>
                                <%= food.quantity %> x  <%= food.food.name %>,
                                <% } else { %>
                                    <%= food.food.name %>,
                                    <% } %>
                                <% }) %>
                            </p>
                    </td>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
